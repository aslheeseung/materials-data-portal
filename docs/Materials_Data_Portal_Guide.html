<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Materials Data Portal - Guide</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      line-height: 1.6;
      color: #333;
      max-width: 900px;
      margin: 0 auto;
      padding: 40px 20px;
      background: #fff;
    }
    h1 { color: #1a365d; border-bottom: 3px solid #3182ce; padding-bottom: 10px; margin-bottom: 30px; }
    h2 { color: #2c5282; margin-top: 40px; margin-bottom: 20px; border-left: 4px solid #3182ce; padding-left: 15px; }
    h3 { color: #2d3748; margin-top: 25px; margin-bottom: 15px; }
    p { margin-bottom: 15px; }
    ul, ol { margin-left: 25px; margin-bottom: 15px; }
    li { margin-bottom: 8px; }
    code { background: #edf2f7; padding: 2px 6px; border-radius: 4px; font-family: 'Consolas', monospace; }
    pre { background: #2d3748; color: #e2e8f0; padding: 20px; border-radius: 8px; overflow-x: auto; margin: 15px 0; }
    pre code { background: none; color: inherit; }
    table { width: 100%; border-collapse: collapse; margin: 20px 0; }
    th, td { border: 1px solid #e2e8f0; padding: 12px; text-align: left; }
    th { background: #3182ce; color: white; }
    tr:nth-child(even) { background: #f7fafc; }
    .badge { display: inline-block; background: #38a169; color: white; padding: 2px 8px; border-radius: 4px; font-size: 12px; margin-left: 8px; }
    .section { page-break-inside: avoid; }
    .highlight { background: #fef3c7; padding: 15px; border-radius: 8px; border-left: 4px solid #f59e0b; margin: 20px 0; }
    .diagram { background: #f7fafc; padding: 20px; border-radius: 8px; font-family: monospace; white-space: pre; overflow-x: auto; margin: 20px 0; }
    @media print {
      body { padding: 20px; }
      h2 { page-break-before: always; }
      h2:first-of-type { page-break-before: avoid; }
      pre { white-space: pre-wrap; }
    }
  </style>
</head>
<body>

<h1>Materials Data Portal</h1>
<p style="text-align: center; font-size: 1.2em; color: #4a5568;">사용 가이드 및 개발 요약</p>
<p style="text-align: center; color: #718096;">Version 1.0 | 2026-02-01</p>

<h2>1. 프로젝트 개요</h2>
<div class="section">
  <p><strong>Materials Data Portal</strong>은 재료 과학 연구자를 위한 AI 기반 데이터 포털입니다.</p>

  <h3>핵심 가치</h3>
  <ul>
    <li><strong>Materials Project</strong> 데이터베이스 검색</li>
    <li><strong>AI Agent</strong> 기반 자동화된 분석</li>
    <li><strong>MLIP (UPET)</strong> 통합으로 에너지 계산</li>
    <li><strong>다중 에이전트 시스템</strong>으로 복잡한 쿼리 처리</li>
  </ul>

  <h3>배포 URL</h3>
  <ul>
    <li><strong>Production:</strong> <a href="https://materials-data-portal.vercel.app">https://materials-data-portal.vercel.app</a></li>
    <li><strong>GitHub:</strong> <a href="https://github.com/aslheeseung/materials-data-portal">https://github.com/aslheeseung/materials-data-portal</a></li>
  </ul>
</div>

<h2>2. 시스템 구조</h2>
<div class="section">
  <div class="diagram">
┌─────────────────────────────────────────────────────────┐
│                  Materials Data Portal                   │
├─────────────────────────────────────────────────────────┤
│                                                          │
│  ┌───────────┐  ┌───────────┐  ┌─────────────────────┐  │
│  │Web Portal │  │MCP Server │  │   Python Server     │  │
│  │ (Next.js) │  │ (Node.js) │  │  (FastAPI + MLIP)   │  │
│  └─────┬─────┘  └─────┬─────┘  └──────────┬──────────┘  │
│        │              │                    │             │
│        ▼              ▼                    ▼             │
│  ┌─────────────────────────────────────────────────────┐│
│  │               Multi-Agent System                     ││
│  │  ┌─────────────────────────────────────────────┐    ││
│  │  │              Master Agent                    │    ││
│  │  │         (계획 수립 및 결과 종합)              │    ││
│  │  └──────────────────┬──────────────────────────┘    ││
│  │         ┌───────────┼───────────┐                    ││
│  │         ▼           ▼           ▼                    ││
│  │  ┌───────────┐ ┌─────────┐ ┌───────────┐            ││
│  │  │ Database  │ │Synthesis│ │ Compute   │            ││
│  │  │  Agent    │ │  Agent  │ │  Agent    │            ││
│  │  └───────────┘ └─────────┘ └───────────┘            ││
│  └─────────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────────┘</div>

  <h3>에이전트 역할</h3>
  <table>
    <tr>
      <th>Agent</th>
      <th>역할</th>
      <th>주요 기능</th>
    </tr>
    <tr>
      <td><strong>Master</strong></td>
      <td>오케스트레이션</td>
      <td>사용자 쿼리 분석, 작업 분배, 결과 종합</td>
    </tr>
    <tr>
      <td><strong>Database</strong></td>
      <td>데이터 검색</td>
      <td>Materials Project 검색, 상세 조회</td>
    </tr>
    <tr>
      <td><strong>Synthesis</strong></td>
      <td>합성 정보</td>
      <td>레시피 검색, 생성, 전구체/온도 필터</td>
    </tr>
    <tr>
      <td><strong>Compute</strong></td>
      <td>계산 분석</td>
      <td>MLIP 에너지, Phase Diagram, 구조 최적화</td>
    </tr>
  </table>
</div>

<h2>3. 설치 및 실행</h2>
<div class="section">
  <h3>사전 요구사항</h3>
  <ul>
    <li>Node.js 18+</li>
    <li>Python 3.10+</li>
    <li>Materials Project API Key</li>
    <li>OpenAI API Key</li>
  </ul>

  <h3>1. 웹 포털 설치</h3>
  <pre><code># 저장소 클론
git clone https://github.com/aslheeseung/materials-data-portal.git
cd materials-data-portal

# 의존성 설치
npm install

# 환경 변수 설정 (.env.local 파일 생성)
OPENAI_API_KEY=sk-...
MP_API_KEY=...

# 개발 서버 실행
npm run dev</code></pre>

  <h3>2. Python 계산 서버 설치</h3>
  <pre><code>cd python-server

# 가상환경 생성 (권장)
python -m venv venv
venv\Scripts\activate  # Windows

# 의존성 설치
pip install -r requirements.txt

# UPET MLIP 설치 (선택사항)
pip install upet

# 서버 실행
$env:MP_API_KEY="your-api-key"  # PowerShell
python -m uvicorn main:app --port 8000</code></pre>
</div>

<h2>4. Lab 페이지 사용법</h2>
<div class="section">
  <div class="highlight">
    <strong>Lab 페이지 (/lab)</strong>는 멀티 에이전트 시스템의 핵심 인터페이스입니다.
  </div>

  <h3>모드 선택</h3>
  <table>
    <tr>
      <th>모드</th>
      <th>설명</th>
      <th>사용 사례</th>
    </tr>
    <tr>
      <td><strong>Master</strong></td>
      <td>멀티 에이전트 협업</td>
      <td>복잡한 종합 질문</td>
    </tr>
    <tr>
      <td><strong>Single</strong></td>
      <td>단일 에이전트 직접 사용</td>
      <td>특정 영역 집중 쿼리</td>
    </tr>
    <tr>
      <td><strong>Research</strong></td>
      <td>연구 모드</td>
      <td>체계적 스크리닝</td>
    </tr>
  </table>

  <h3>Master 모드 사용 예시</h3>
  <pre><code>입력: "LiCoO2 배터리 양극재로 적합한지 분석해줘"

→ Master Agent: 작업 분배
  → Database Agent: LiCoO2 데이터 검색
  → Synthesis Agent: 합성 방법 조회
  → Compute Agent: 구조 분석
→ Master Agent: 결과 종합 및 보고</code></pre>

  <h3>Single 모드 쿼리 예시</h3>
  <table>
    <tr>
      <th>Agent</th>
      <th>예시 쿼리</th>
    </tr>
    <tr>
      <td><strong>Database</strong></td>
      <td>
        "Li-Co-O 시스템 안정한 재료 찾아줘"<br>
        "mp-22526 상세 정보"<br>
        "band gap 1.5-2.5 eV 재료"
      </td>
    </tr>
    <tr>
      <td><strong>Synthesis</strong></td>
      <td>
        "LiCoO2 합성 레시피"<br>
        "sol-gel 방법으로 LiNiO2 만들어줘"<br>
        "Li2CO3 전구체 사용하는 레시피"
      </td>
    </tr>
    <tr>
      <td><strong>Compute</strong></td>
      <td>
        "mp-149 에너지 계산해줘"<br>
        "mp-22526 formation energy"<br>
        "Li-Fe-O phase diagram"<br>
        "mp-149 구조 최적화"
      </td>
    </tr>
  </table>

  <h3>Research 모드 사용 예시</h3>
  <pre><code>입력: "21개 전이금속에서 3원계 합금 후보 추천해줘"

→ 조합 생성: C(21,3) = 1330개
→ 체계적 스크리닝 (안정성, 응용 가능성 분석)
→ 상위 후보 추천 + 근거 설명</code></pre>
</div>

<h2>5. API 참조</h2>
<div class="section">
  <h3>Lab API Endpoints</h3>
  <table>
    <tr>
      <th>Endpoint</th>
      <th>Method</th>
      <th>설명</th>
    </tr>
    <tr>
      <td><code>/api/lab</code></td>
      <td>POST</td>
      <td>Master Agent 오케스트레이션</td>
    </tr>
    <tr>
      <td><code>/api/lab/single</code></td>
      <td>POST</td>
      <td>Single Agent 직접 호출</td>
    </tr>
    <tr>
      <td><code>/api/lab/research</code></td>
      <td>POST</td>
      <td>Research 모드 스크리닝</td>
    </tr>
  </table>

  <h3>Python Compute Server Endpoints</h3>
  <table>
    <tr>
      <th>Endpoint</th>
      <th>설명</th>
    </tr>
    <tr>
      <td><code>/health</code></td>
      <td>서버 상태 확인</td>
    </tr>
    <tr>
      <td><code>/analyze/material</code></td>
      <td>재료 구조 분석</td>
    </tr>
    <tr>
      <td><code>/phase-diagram</code></td>
      <td>Phase diagram 생성</td>
    </tr>
    <tr>
      <td><code>/mlip/status</code></td>
      <td>MLIP 상태 확인</td>
    </tr>
    <tr>
      <td><code>/mlip/energy</code></td>
      <td>에너지 계산</td>
    </tr>
    <tr>
      <td><code>/mlip/formation-energy</code></td>
      <td>Formation energy</td>
    </tr>
    <tr>
      <td><code>/mlip/relax</code></td>
      <td>구조 최적화</td>
    </tr>
  </table>
</div>

<h2>6. 개발 이력</h2>
<div class="section">
  <table>
    <tr>
      <th>Phase</th>
      <th>내용</th>
    </tr>
    <tr>
      <td><strong>Phase 1</strong></td>
      <td>Next.js 14 프로젝트 설정, Materials Project API 연동</td>
    </tr>
    <tr>
      <td><strong>Phase 2</strong></td>
      <td>MCP 프로토콜 서버 구현, Claude Code 연동</td>
    </tr>
    <tr>
      <td><strong>Phase 3</strong></td>
      <td>OpenAI GPT-4 연동, AI 챗봇 인터페이스</td>
    </tr>
    <tr>
      <td><strong>Phase 4</strong></td>
      <td>합성 레시피 데이터베이스 구축</td>
    </tr>
    <tr>
      <td><strong>Phase 5</strong></td>
      <td>Multi-Agent Lab 시스템 (Master/Single/Research 모드)</td>
    </tr>
    <tr>
      <td><strong>Phase 6</strong></td>
      <td>UPET MLIP 통합 (에너지 계산, 구조 최적화)</td>
    </tr>
    <tr>
      <td><strong>Phase 7</strong></td>
      <td>Vercel 배포 최적화</td>
    </tr>
  </table>
</div>

<h2>7. 문제 해결</h2>
<div class="section">
  <table>
    <tr>
      <th>문제</th>
      <th>해결 방법</th>
    </tr>
    <tr>
      <td>"계산 서버 연결 오류"</td>
      <td><code>python -m uvicorn main:app --port 8000</code></td>
    </tr>
    <tr>
      <td>"MLIP 사용 불가"</td>
      <td><code>pip install upet</code></td>
    </tr>
    <tr>
      <td>"MP API 401 오류"</td>
      <td><code>$env:MP_API_KEY="your-key"</code></td>
    </tr>
  </table>
</div>

<hr style="margin: 40px 0; border: none; border-top: 2px solid #e2e8f0;">
<p style="text-align: center; color: #718096;">
  <em>Developed with Claude Code (Claude Opus 4.5)</em><br>
  <em>Last Updated: 2026-02-01</em>
</p>

</body>
</html>
